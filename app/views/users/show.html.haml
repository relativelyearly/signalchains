- title "Signal Chains: #{@user.display_name}"
- content_for(:head) do
  %link{:rel => 'canonical', :href => user_by_login_url(@user.login)}

.bucket.user-page
  .first.col.w45
    %h1
      = link_to image_tag(@user.avatar.url(:thumb), :alt => @user.display_name), @user.avatar.url(:display), :class => 'zoom'
      = @user.display_name
  .col.w15#follow
    = follow_button(@user)
    - if current_user == @user
      = link_to "<span>#{image_tag 'icons/add.png'} Create a Chain</span>", new_chain_path, :class => 'btn w15'    
  .first

#feed.col.first.w40
  %h3 Activity
  - if @events.empty?
    - if @user == current_user
      .help
        %p
          Thanks for signing up, now it's time to get this party started! Here are some suggestions for what to do next:
          %ul
            %li
              = link_to "Edit your profile", edit_account_path
              to set a display name and profile image.
            %li
              = link_to "Browse gear", gear_path
              to hear samples of it in action and share your thoughts.
            %li
              = link_to "Create a Chain", new_chain_path
              featuring your signal flow and audio that you have recorded.
            %li
              Follow other users by visiting their profile to create your own activity feed.
            
    - else
      %p
        %small
          = @user.display_name
          hasn't really done anything worth talking about. Try back later when they get their bearings.

  -else
    - for event in @events
      = render(:partial => "events/#{event.event_type}", :object => event)
  
  = will_paginate(@events)

.col.w25#user-chains
  .list
    %h3 Chains
    - unless @user.chains.empty?
      %h4= link_to 'Created', chains_by_login_path(:username => @user.login)
      %ul.list
        - @chains.each do |chain|
          %li= link_to chain.name, chain
      - if @chains.size > 0
        = link_to "<small>View All (#{@user.chains.count})</small>", chains_by_login_path(:username => @user.login)

    - unless @user.liked_chains.empty?
      %h4== #{@user.display_name} Likes
      %ul.list
        - @user.likes.all(:limit => 5, :order => 'created_at DESC').each do |like|
          %li= link_to like.chain.name, like.chain

      - if @recommended_chains
        %h4 Suggested
        %ul.list
          - @recommended_chains.each do |chain|
            %li= link_to chain.name, chain
  .list
    %h3 Gear
    - unless @user.recommendations.empty?
      %h4== #{@user.display_name} Recommends
      %ul.list
        - @user.recommendations.all(:limit => 5, :order => 'created_at DESC').each do |recommendation|
          %li= link_to recommendation.recommendable.name, recommendation.recommendable

    - if @recommended_gear
      %h4 Suggested
      %ul.list
        - @recommended_gear.each do |gear|
          %li= link_to gear.name, gear
.first
